<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>Récupération et utilisation du jeton userinfo PSC - Sécurisation de la couche transport API REST Pro Santé Connectée v1.2.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/style-ans.css"/>
    <link rel="stylesheet" href="assets/css/style-add-ans.css"/>
    <!-- Placeholder for child template CSS declarations -->

    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"3.4"}
    h3,h4,h5,h6{--heading-prefix:"3.4"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->
        <!-- Placeholder for child template header declarations -->
<div id="family-nav">
  <a id="hl7-search-lnk" no-external="true" href="http://hl7.org/fhir"><img height="50" alt="Visit the FHIR website" src="assets/images/fhir-logo-www.png"/> </a>
</div>
<div id="ans-nav" style="line-height: 50px; float: left; margin-top: 4px; margin-bottom: 8px; color: #808080; ">
  <a id="hl7-logo" no-external="true" href="https://esante.gouv.fr/"><img height="50" alt="ANS Logo" src="assets/images/logo-ANS.svg"/></a>
</div>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Sécurisation de la couche transport API REST Pro Santé Connectée</span>
            <br/>
            <span style="display:inline-block;">1.2.0 - trial-use



  <img alt="France flag" src="assets/images/fra.svg" height="16" title="France"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Accueil</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Description générale des flux
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="principes_generaux_du_volet.html">Principes généraux de ce volet</a>
      </li>
      <li>
        <a href="archi_documentaire.html">Architecture documentaire</a>
      </li>
      <li>
        <a href="standards.html">Standards utilisés (REST, OAUTH 2.0 ET OIDC)</a>
      </li>
      <li>
        <a href="principes_securisation.html">Principes de sécurisation</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">API ProSantéConnectée
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="api_prosanteconnectee.html">Description générale</a>
      </li>
      <li>
        <a href="api_prosanteconnectee_web.html">Application web</a>
      </li>
      <li>
        <a href="api_prosanteconnectee_web_erreurs.html">Application web - cas d&apos;erreurs</a>
      </li>
      <li>
        <a href="api_prosanteconnectee_client_lourd.html">Application client lourd ou mobile</a>
      </li>
      <li>
        <a href="api_prosanteconnectee_userinfo.html">Récupération et utilisation du jeton userinfo PSC</a>
      </li>
      <li>
        <a href="api_prosanteconnectee_donnees_metiers.html">Passage de données métiers de l&apos;application cliente vers l&apos;API</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Glossaire et documents de référence
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="glossaire.html">Glossaire</a>
      </li>
      <li>
        <a href="documents_de_reference.html">Documents de référence</a>
      </li>
    </ul>
  </li>
  <li>
    <a target="_blank" href="https://interop.esante.gouv.fr/ig/">Liste des guides</a>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><a href='api_prosanteconnectee.html'><b>API ProSantéConnectée</b></a></li><li><b>Récupération et utilisation du jeton userinfo PSC</b></li>

          <span style="float:right;">

            <a href="api_prosanteconnectee_client_lourd.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="api_prosanteconnectee_donnees_metiers.html">next&gt;</a>

          </span>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">Sécurisation de la couche transport API REST Pro Santé Connectée - Local Development build (v1.2.0) built by the FHIR (HL7® FHIR® Standard) Build Tools. See the <a href="https://interop.esante.gouv.fr/ig/securisation-transport/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  <h2>Récupération et utilisation du jeton userinfo PSC</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#cas-dune-application-web-navigateur" id="markdown-toc-cas-dune-application-web-navigateur">Cas d’une application web (navigateur)</a></li>
  <li><a href="#cas-dune-application-client-lourd" id="markdown-toc-cas-dune-application-client-lourd">Cas d’une application client lourd</a></li>
</ul>

</div>
<p><strong>Une fois l’utilisateur authentifié sur Pro Santé Connect, l’obtention du jeton <code class="language-plaintext highlighter-rouge">Userinfo</code> du PS est demandé par le service cible</strong>.</p>

<h3 id="cas-dune-application-web-navigateur">Cas d’une application web (navigateur)</h3>

<h4 id="cas-où-le-fournisseur-de-services-souhaite-accéder-au-userinfo">Cas où le fournisseur de services souhaite accéder au <code class="language-plaintext highlighter-rouge">userinfo</code></h4>

<p>La requête de récupération du jeton <code class="language-plaintext highlighter-rouge">UserInfo</code> [10] par le fournisseur de services est décrite dans la documentation PSC.</p>

<div style="text-align: center;"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="267.2794px" preserveAspectRatio="none" style="width:1024px;height:267px;background:#FFFFFF;" version="1.1" viewBox="0 0 1024 267" width="1024.5711px" zoomAndPan="magnify"><defs /><g><rect fill="#98FB98" height="253.7156" style="stroke:#181818;stroke-width:0.5711098717233687;" width="475.1634" x="1.1422" y="6.8533" /><text fill="#000000" font-family="sans-serif" font-size="14.8489" font-weight="bold" lengthAdjust="spacing" textLength="245.5772" x="115.9353" y="20.6364">Systeme appelant / initiateur</text><rect fill="#AFEEEE" height="253.7156" style="stroke:#181818;stroke-width:0.5711098717233687;" width="322.106" x="696.1829" y="6.8533" /><text fill="#000000" font-family="sans-serif" font-size="14.8489" font-weight="bold" lengthAdjust="spacing" textLength="117.6486" x="798.4116" y="20.6364">Systeme cible</text><rect fill="#FFFFFF" height="67.5427" style="stroke:#181818;stroke-width:1.1422197434467374;" width="11.4222" x="298.6905" y="100.0156" /><rect fill="#FFFFFF" height="67.5427" style="stroke:#181818;stroke-width:1.1422197434467374;" width="11.4222" x="605.9476" y="133.2917" /><line style="stroke:#181818;stroke-width:0.5711098717233687;stroke-dasharray:5.0,5.0;" x1="54.8265" x2="54.8265" y1="64.4551" y2="221.3943" /><line style="stroke:#181818;stroke-width:0.5711098717233687;stroke-dasharray:5.0,5.0;" x1="303.8305" x2="303.8305" y1="64.4551" y2="221.3943" /><line style="stroke:#181818;stroke-width:0.5711098717233687;stroke-dasharray:5.0,5.0;" x1="611.6587" x2="611.6587" y1="64.4551" y2="221.3943" /><line style="stroke:#181818;stroke-width:0.5711098717233687;stroke-dasharray:5.0,5.0;" x1="794.4138" x2="794.4138" y1="64.4551" y2="221.3943" /><line style="stroke:#181818;stroke-width:0.5711098717233687;stroke-dasharray:5.0,5.0;" x1="956.609" x2="956.609" y1="64.4551" y2="221.3943" /><rect fill="#E2E2F0" height="34.6057" rx="2.8555" ry="2.8555" style="stroke:#181818;stroke-width:0.5711098717233687;" width="99.3731" x="5.7111" y="28.7072" /><text fill="#000000" font-family="sans-serif" font-size="15.9911" lengthAdjust="spacing" textLength="83.382" x="13.7066" y="51.546">Navigateur</text><rect fill="#E2E2F0" height="34.6057" rx="2.8555" ry="2.8555" style="stroke:#181818;stroke-width:0.5711098717233687;" width="99.3731" x="5.7111" y="220.2521" /><text fill="#000000" font-family="sans-serif" font-size="15.9911" lengthAdjust="spacing" textLength="83.382" x="13.7066" y="243.0909">Navigateur</text><rect fill="#E2E2F0" height="34.6057" rx="2.8555" ry="2.8555" style="stroke:#181818;stroke-width:0.5711098717233687;" width="334.6704" x="137.0664" y="28.7072" /><text fill="#000000" font-family="sans-serif" font-size="15.9911" lengthAdjust="spacing" textLength="318.6793" x="145.0619" y="51.546">Fournisseur de services et proxy LPS/API</text><rect fill="#E2E2F0" height="34.6057" rx="2.8555" ry="2.8555" style="stroke:#181818;stroke-width:0.5711098717233687;" width="334.6704" x="137.0664" y="220.2521" /><text fill="#000000" font-family="sans-serif" font-size="15.9911" lengthAdjust="spacing" textLength="318.6793" x="145.0619" y="243.0909">Fournisseur de services et proxy LPS/API</text><rect fill="#E2E2F0" height="34.6057" rx="2.8555" ry="2.8555" style="stroke:#181818;stroke-width:0.5711098717233687;" width="155.3419" x="533.9877" y="28.7072" /><text fill="#000000" font-family="sans-serif" font-size="15.9911" lengthAdjust="spacing" textLength="139.3508" x="541.9833" y="51.546">ProSanteConnect</text><rect fill="#E2E2F0" height="34.6057" rx="2.8555" ry="2.8555" style="stroke:#181818;stroke-width:0.5711098717233687;" width="155.3419" x="533.9877" y="220.2521" /><text fill="#000000" font-family="sans-serif" font-size="15.9911" lengthAdjust="spacing" textLength="139.3508" x="541.9833" y="243.0909">ProSanteConnect</text><rect fill="#E2E2F0" height="34.6057" rx="2.8555" ry="2.8555" style="stroke:#181818;stroke-width:0.5711098717233687;" width="187.324" x="700.7518" y="28.7072" /><text fill="#000000" font-family="sans-serif" font-size="15.9911" lengthAdjust="spacing" textLength="171.333" x="708.7474" y="51.546">Serveur d'autorisation</text><rect fill="#E2E2F0" height="34.6057" rx="2.8555" ry="2.8555" style="stroke:#181818;stroke-width:0.5711098717233687;" width="187.324" x="700.7518" y="220.2521" /><text fill="#000000" font-family="sans-serif" font-size="15.9911" lengthAdjust="spacing" textLength="171.333" x="708.7474" y="243.0909">Serveur d'autorisation</text><rect fill="#E2E2F0" height="34.6057" rx="2.8555" ry="2.8555" style="stroke:#181818;stroke-width:0.5711098717233687;" width="114.222" x="899.498" y="28.7072" /><text fill="#000000" font-family="sans-serif" font-size="15.9911" lengthAdjust="spacing" textLength="98.2309" x="907.4936" y="51.546">Service cible</text><rect fill="#E2E2F0" height="34.6057" rx="2.8555" ry="2.8555" style="stroke:#181818;stroke-width:0.5711098717233687;" width="114.222" x="899.498" y="220.2521" /><text fill="#000000" font-family="sans-serif" font-size="15.9911" lengthAdjust="spacing" textLength="98.2309" x="907.4936" y="243.0909">Service cible</text><rect fill="#FFFFFF" height="67.5427" style="stroke:#181818;stroke-width:1.1422197434467374;" width="11.4222" x="298.6905" y="100.0156" /><rect fill="#FFFFFF" height="67.5427" style="stroke:#181818;stroke-width:1.1422197434467374;" width="11.4222" x="605.9476" y="133.2917" /><polygon fill="#181818" points="284.9838,95.4467,296.406,100.0156,284.9838,104.5845,289.5527,100.0156" style="stroke:#181818;stroke-width:1.1422197434467374;" /><line style="stroke:#181818;stroke-width:1.1422197434467374;" x1="55.3977" x2="291.8371" y1="100.0156" y2="100.0156" /><text fill="#000000" font-family="sans-serif" font-size="14.8489" lengthAdjust="spacing" textLength="221.5906" x="63.3932" y="94.2292">1. Demande de userinfo (PSC)</text><polygon fill="#181818" points="592.2409,128.7228,603.6631,133.2917,592.2409,137.8606,596.8098,133.2917" style="stroke:#181818;stroke-width:1.1422197434467374;" /><line style="stroke:#181818;stroke-width:1.1422197434467374;" x1="310.1127" x2="599.0943" y1="133.2917" y2="133.2917" /><text fill="#000000" font-family="sans-serif" font-size="14.8489" lengthAdjust="spacing" textLength="274.1327" x="318.1082" y="127.5053">2. subject_token + demande userinfo</text><polygon fill="#181818" points="316.966,196.2655,305.5438,200.8344,316.966,205.4032,312.3971,200.8344" style="stroke:#181818;stroke-width:1.1422197434467374;" /><line style="stroke:#181818;stroke-width:1.1422197434467374;" x1="310.1127" x2="610.5165" y1="200.8344" y2="200.8344" /><text fill="#000000" font-family="sans-serif" font-size="14.8489" lengthAdjust="spacing" textLength="122.2175" x="323.8193" y="195.048">3. userinfo (PSC)</text></g></svg></div>

<h4 id="cas-où-le-service-cible-souhaite-accéder-au-userinfo">Cas où le service cible souhaite accéder au userinfo</h4>

<p><strong>Le service cible, par l’intermédiaire du serveur d’autorisation, souhaite récupérer le jeton userinfo PSC.</strong></p>
<ul>
  <li>Le jeton user info ne peut pas être récupéré directement auprès de PSC. 
Dans ce cas c’est le serveur d’autorisation qui le récupère et qui le met en cache.</li>
  <li>Le serveur d’autorisation récupère le userinfo durant la durée de validité du <code class="language-plaintext highlighter-rouge">subject_token</code>.</li>
</ul>

<div style="text-align: center;"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="512.5453px" preserveAspectRatio="none" style="width:1024px;height:512px;background:#FFFFFF;" version="1.1" viewBox="0 0 1024 512" width="1024.3635px" zoomAndPan="magnify"><defs /><g><rect fill="#98FB98" height="503.9063" style="stroke:#181818;stroke-width:0.36350727724529647;" width="449.295" x="0.727" y="4.3621" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" font-weight="bold" lengthAdjust="spacing" textLength="156.3081" x="147.2204" y="13.1349">Systeme appelant / initiateur</text><rect fill="#AFEEEE" height="503.9063" style="stroke:#181818;stroke-width:0.36350727724529647;" width="306.8001" x="709.2027" y="4.3621" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" font-weight="bold" lengthAdjust="spacing" textLength="74.1555" x="825.525" y="13.1349">systeme cible</text><rect fill="#FFFFFF" height="134.35" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="336.9712" y="63.6592" /><rect fill="#FFFFFF" height="113.0735" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="336.9712" y="292.1803" /><rect fill="#FFFFFF" height="51.8111" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="600.1505" y="102.3841" /><rect fill="#FFFFFF" height="21.18" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="600.1505" y="219.1892" /><rect fill="#FFFFFF" height="21.18" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="600.1505" y="352.7157" /><rect fill="#FFFFFF" height="115.9815" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="768.0909" y="198.0092" /><rect fill="#FFFFFF" height="21.18" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="768.0909" y="443.9787" /><rect fill="#FFFFFF" height="71.5371" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="973.109" y="405.2538" /><rect fill="none" height="85.4469" style="stroke:#000000;stroke-width:1.0905218317358893;" width="533.2652" x="226.8285" y="74.5644" /><rect fill="none" height="214.6113" style="stroke:#000000;stroke-width:1.0905218317358893;" width="749.9155" x="226.8285" y="170.1896" /><rect fill="none" height="54.8158" style="stroke:#000000;stroke-width:1.0905218317358893;" width="291.5328" x="547.0785" y="324.896" /><rect fill="none" height="54.8158" style="stroke:#000000;stroke-width:1.0905218317358893;" width="315.5243" x="704.8406" y="416.159" /><line style="stroke:#181818;stroke-width:0.36350727724529647;stroke-dasharray:5.0,5.0;" x1="34.8967" x2="34.8967" y1="41.0252" y2="483.334" /><line style="stroke:#181818;stroke-width:0.36350727724529647;stroke-dasharray:5.0,5.0;" x1="340.2428" x2="340.2428" y1="41.0252" y2="483.334" /><line style="stroke:#181818;stroke-width:0.36350727724529647;stroke-dasharray:5.0,5.0;" x1="603.7856" x2="603.7856" y1="41.0252" y2="483.334" /><line style="stroke:#181818;stroke-width:0.36350727724529647;stroke-dasharray:5.0,5.0;" x1="771.7259" x2="771.7259" y1="41.0252" y2="483.334" /><line style="stroke:#181818;stroke-width:0.36350727724529647;stroke-dasharray:5.0,5.0;" x1="976.7441" x2="976.7441" y1="41.0252" y2="483.334" /><rect fill="#E2E2F0" height="22.0263" rx="1.8175" ry="1.8175" style="stroke:#181818;stroke-width:0.36350727724529647;" width="63.2503" x="3.6351" y="18.2719" /><text fill="#000000" font-family="sans-serif" font-size="10.1782" lengthAdjust="spacing" textLength="53.0721" x="8.7242" y="32.8087">Navigateur</text><rect fill="#E2E2F0" height="22.0263" rx="1.8175" ry="1.8175" style="stroke:#181818;stroke-width:0.36350727724529647;" width="63.2503" x="3.6351" y="482.607" /><text fill="#000000" font-family="sans-serif" font-size="10.1782" lengthAdjust="spacing" textLength="53.0721" x="8.7242" y="497.1438">Navigateur</text><rect fill="#E2E2F0" height="22.0263" rx="1.8175" ry="1.8175" style="stroke:#181818;stroke-width:0.36350727724529647;" width="213.0153" x="234.0987" y="18.2719" /><text fill="#000000" font-family="sans-serif" font-size="10.1782" lengthAdjust="spacing" textLength="202.8371" x="239.1878" y="32.8087">Fournisseur de services et proxy LPS/API</text><rect fill="#E2E2F0" height="22.0263" rx="1.8175" ry="1.8175" style="stroke:#181818;stroke-width:0.36350727724529647;" width="213.0153" x="234.0987" y="482.607" /><text fill="#000000" font-family="sans-serif" font-size="10.1782" lengthAdjust="spacing" textLength="202.8371" x="239.1878" y="497.1438">Fournisseur de services et proxy LPS/API</text><rect fill="#E2E2F0" height="22.0263" rx="1.8175" ry="1.8175" style="stroke:#181818;stroke-width:0.36350727724529647;" width="98.874" x="554.3486" y="18.2719" /><text fill="#000000" font-family="sans-serif" font-size="10.1782" lengthAdjust="spacing" textLength="88.6958" x="559.4377" y="32.8087">ProSanteConnect</text><rect fill="#E2E2F0" height="22.0263" rx="1.8175" ry="1.8175" style="stroke:#181818;stroke-width:0.36350727724529647;" width="98.874" x="554.3486" y="482.607" /><text fill="#000000" font-family="sans-serif" font-size="10.1782" lengthAdjust="spacing" textLength="88.6958" x="559.4377" y="497.1438">ProSanteConnect</text><rect fill="#E2E2F0" height="22.0263" rx="1.8175" ry="1.8175" style="stroke:#181818;stroke-width:0.36350727724529647;" width="119.2304" x="712.1108" y="18.2719" /><text fill="#000000" font-family="sans-serif" font-size="10.1782" lengthAdjust="spacing" textLength="109.0522" x="717.1999" y="32.8087">Serveur d'autorisation</text><rect fill="#E2E2F0" height="22.0263" rx="1.8175" ry="1.8175" style="stroke:#181818;stroke-width:0.36350727724529647;" width="119.2304" x="712.1108" y="482.607" /><text fill="#000000" font-family="sans-serif" font-size="10.1782" lengthAdjust="spacing" textLength="109.0522" x="717.1999" y="497.1438">Serveur d'autorisation</text><rect fill="#E2E2F0" height="22.0263" rx="1.8175" ry="1.8175" style="stroke:#181818;stroke-width:0.36350727724529647;" width="72.7015" x="940.3933" y="18.2719" /><text fill="#000000" font-family="sans-serif" font-size="10.1782" lengthAdjust="spacing" textLength="62.5233" x="945.4824" y="32.8087">Service cible</text><rect fill="#E2E2F0" height="22.0263" rx="1.8175" ry="1.8175" style="stroke:#181818;stroke-width:0.36350727724529647;" width="72.7015" x="940.3933" y="482.607" /><text fill="#000000" font-family="sans-serif" font-size="10.1782" lengthAdjust="spacing" textLength="62.5233" x="945.4824" y="497.1438">Service cible</text><rect fill="#FFFFFF" height="134.35" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="336.9712" y="63.6592" /><rect fill="#FFFFFF" height="113.0735" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="336.9712" y="292.1803" /><rect fill="#FFFFFF" height="51.8111" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="600.1505" y="102.3841" /><rect fill="#FFFFFF" height="21.18" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="600.1505" y="219.1892" /><rect fill="#FFFFFF" height="21.18" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="600.1505" y="352.7157" /><rect fill="#FFFFFF" height="115.9815" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="768.0909" y="198.0092" /><rect fill="#FFFFFF" height="21.18" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="768.0909" y="443.9787" /><rect fill="#FFFFFF" height="71.5371" style="stroke:#181818;stroke-width:0.7270145544905929;" width="7.2701" x="973.109" y="405.2538" /><polygon fill="#181818" points="328.2471,60.7512,335.5172,63.6592,328.2471,66.5673,331.1551,63.6592" style="stroke:#181818;stroke-width:0.7270145544905929;" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="35.2602" x2="332.6092" y1="63.6592" y2="63.6592" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="287.8978" x="40.3493" y="59.9762">1. acces initial avec cookie de session (user deja PSConnecte)</text><path d="M226.8285,74.5644 L447.841,74.5644 L447.841,79.7501 L440.5708,87.0202 L226.8285,87.0202 L226.8285,74.5644 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0905218317358893;" /><rect fill="none" height="85.4469" style="stroke:#000000;stroke-width:1.0905218317358893;" width="533.2652" x="226.8285" y="74.5644" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" font-weight="bold" lengthAdjust="spacing" textLength="188.2968" x="237.7338" y="84.0643">Authentification Pro Sante Connect</text><polygon fill="#181818" points="591.4263,99.476,598.6965,102.3841,591.4263,105.2922,594.3344,102.3841" style="stroke:#181818;stroke-width:0.7270145544905929;" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="344.2414" x2="595.7884" y1="102.3841" y2="102.3841" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="235.5527" x="349.3305" y="98.7011">2. Demande de subject_token + cookie de session</text><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="607.4207" x2="637.9553" y1="123.5641" y2="123.5641" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="637.9553" x2="637.9553" y1="123.5641" y2="133.0153" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="608.1477" x2="637.9553" y1="133.0153" y2="133.0153" /><polygon fill="#181818" points="615.4178,130.1072,608.1477,133.0153,615.4178,135.9233,612.5098,133.0153" style="stroke:#181818;stroke-width:0.7270145544905929;" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="138.8598" x="612.5098" y="119.8811">Controle du cookie de session</text><polygon fill="#181818" points="352.2386,151.2872,344.9684,154.1952,352.2386,157.1033,349.3305,154.1952" style="stroke:#181818;stroke-width:0.7270145544905929;" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="347.8765" x2="603.0586" y1="154.1952" y2="154.1952" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="238.4608" x="356.6006" y="150.5122">3. ID Token + subject_token + Refresh Token (PSC)</text><path d="M226.8285,170.1896 L338.7888,170.1896 L338.7888,175.3752 L331.5186,182.6454 L226.8285,182.6454 L226.8285,170.1896 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0905218317358893;" /><rect fill="none" height="214.6113" style="stroke:#000000;stroke-width:1.0905218317358893;" width="749.9155" x="226.8285" y="170.1896" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" font-weight="bold" lengthAdjust="spacing" textLength="79.2446" x="237.7338" y="179.6894">OAUTH2.0 flow</text><polygon fill="#181818" points="759.3667,195.1012,766.6368,198.0092,759.3667,200.9173,762.2748,198.0092" style="stroke:#181818;stroke-width:0.7270145544905929;" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="340.6063" x2="763.7288" y1="198.0092" y2="198.0092" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="341.6968" x="345.6954" y="194.3262">4. subject_token(parametre) + Client ID_AS(header) + scope(parametre)</text><polygon fill="#181818" points="615.4178,216.2812,608.1477,219.1892,615.4178,222.0973,612.5098,219.1892" style="stroke:#181818;stroke-width:0.7270145544905929;" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="611.0557" x2="767.3639" y1="219.1892" y2="219.1892" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="146.8569" x="619.7799" y="215.5062">5. subject_token (introspection)</text><polygon fill="#181818" points="759.3667,237.4611,766.6368,240.3692,759.3667,243.2772,762.2748,240.3692" style="stroke:#181818;stroke-width:0.7270145544905929;" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="603.7856" x2="763.7288" y1="240.3692" y2="240.3692" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="29.0806" x="608.8747" y="236.6862">OK/KO</text><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="775.361" x2="805.8956" y1="261.5492" y2="261.5492" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="805.8956" x2="805.8956" y1="261.5492" y2="271.0004" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="776.088" x2="805.8956" y1="271.0004" y2="271.0004" /><polygon fill="#181818" points="783.3582,268.0923,776.088,271.0004,783.3582,273.9084,780.4501,271.0004" style="stroke:#181818;stroke-width:0.7270145544905929;" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="187.5698" x="780.4501" y="257.8662">Controle d'acces (Client ID_AS x scopes)</text><polygon fill="#181818" points="352.2386,289.2723,344.9684,292.1803,352.2386,295.0884,349.3305,292.1803" style="stroke:#181818;stroke-width:0.7270145544905929;" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="347.8765" x2="767.3639" y1="292.1803" y2="292.1803" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="74.8825" x="356.6006" y="288.4973">6. access_token</text><path d="M547.0785,324.896 L694.6624,324.896 L694.6624,330.0816 L687.3923,337.3518 L547.0785,337.3518 L547.0785,324.896 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0905218317358893;" /><rect fill="none" height="54.8158" style="stroke:#000000;stroke-width:1.0905218317358893;" width="291.5328" x="547.0785" y="324.896" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" font-weight="bold" lengthAdjust="spacing" textLength="114.8683" x="557.9837" y="334.3958">userinfo - OPTIONNEL</text><polygon fill="#181818" points="615.4178,349.8076,608.1477,352.7157,615.4178,355.6237,612.5098,352.7157" style="stroke:#181818;stroke-width:0.7270145544905929;" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="611.0557" x2="770.9989" y1="352.7157" y2="352.7157" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="106.8711" x="619.7799" y="349.0327">7. demande le userinfo</text><polygon fill="#181818" points="763.0018,370.9876,770.2719,373.8956,763.0018,376.8037,765.9098,373.8956" style="stroke:#181818;stroke-width:0.7270145544905929;" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="603.7856" x2="767.3639" y1="373.8956" y2="373.8956" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="120.6844" x="608.8747" y="370.2126">8. userinfo (mis en cache)</text><polygon fill="#181818" points="964.3848,402.3458,971.655,405.2538,964.3848,408.1619,967.2929,405.2538" style="stroke:#181818;stroke-width:0.7270145544905929;" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="340.6063" x2="968.7469" y1="405.2538" y2="405.2538" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="178.1186" x="345.6954" y="401.5708">9. access_token + acces aux donnees</text><path d="M704.8406,416.159 L852.4246,416.159 L852.4246,421.3447 L845.1544,428.6148 L704.8406,428.6148 L704.8406,416.159 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0905218317358893;" /><rect fill="none" height="54.8158" style="stroke:#000000;stroke-width:1.0905218317358893;" width="315.5243" x="704.8406" y="416.159" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" font-weight="bold" lengthAdjust="spacing" textLength="114.8683" x="715.7458" y="425.6589">userinfo - OPTIONNEL</text><polygon fill="#181818" points="783.3582,441.0706,776.088,443.9787,783.3582,446.8868,780.4501,443.9787" style="stroke:#181818;stroke-width:0.7270145544905929;" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="778.9961" x2="972.382" y1="443.9787" y2="443.9787" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="154.1271" x="787.7203" y="440.2957">10. demande userinfo (en cache)</text><polygon fill="#181818" points="964.3848,462.2506,971.655,465.1587,964.3848,468.0667,967.2929,465.1587" style="stroke:#181818;stroke-width:0.7270145544905929;" /><line style="stroke:#181818;stroke-width:0.7270145544905929;" x1="771.7259" x2="968.7469" y1="465.1587" y2="465.1587" /><text fill="#000000" font-family="sans-serif" font-size="9.4512" lengthAdjust="spacing" textLength="54.5261" x="776.8151" y="461.4757">11. userinfo</text></g></svg></div>

<h3 id="cas-dune-application-client-lourd">Cas d’une application client lourd</h3>

<h4 id="cas-où-le-logiciel-ps-souhaite-accéder-au-userinfo">Cas où le logiciel PS souhaite accéder au <code class="language-plaintext highlighter-rouge">userinfo</code></h4>

<ul>
  <li>La requête de récupération du jeton <code class="language-plaintext highlighter-rouge">UserInfo</code> [10] par le fournisseur de services est décrite dans la documentation PSC.</li>
  <li>Le jeton <code class="language-plaintext highlighter-rouge">userinfo</code> est récupéré par le proxy LPS.</li>
</ul>

<div style="text-align: center;"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="265.9445px" preserveAspectRatio="none" style="width:1025px;height:265px;background:#FFFFFF;" version="1.1" viewBox="0 0 1025 265" width="1025.1365px" zoomAndPan="magnify"><defs /><g><rect fill="#98FB98" height="252.4484" style="stroke:#181818;stroke-width:0.5682574916759157;" width="371.0721" x="1.1365" y="6.8191" /><text fill="#000000" font-family="sans-serif" font-size="14.7747" font-weight="bold" lengthAdjust="spacing" textLength="244.3507" x="64.4972" y="20.5333">Systeme appelant / initiateur</text><rect fill="#AFEEEE" height="252.4484" style="stroke:#181818;stroke-width:0.5682574916759157;" width="320.4972" x="697.8202" y="6.8191" /><text fill="#000000" font-family="sans-serif" font-size="14.7747" font-weight="bold" lengthAdjust="spacing" textLength="117.061" x="799.5383" y="20.5333">Systeme cible</text><rect fill="#FFFFFF" height="67.2053" style="stroke:#181818;stroke-width:1.1365149833518313;" width="11.3651" x="302.313" y="99.5161" /><rect fill="#FFFFFF" height="67.2053" style="stroke:#181818;stroke-width:1.1365149833518313;" width="11.3651" x="608.0355" y="132.626" /><line style="stroke:#181818;stroke-width:0.5682574916759157;stroke-dasharray:5.0,5.0;" x1="60.2353" x2="60.2353" y1="64.1332" y2="220.2886" /><line style="stroke:#181818;stroke-width:0.5682574916759157;stroke-dasharray:5.0,5.0;" x1="307.4273" x2="307.4273" y1="64.1332" y2="220.2886" /><line style="stroke:#181818;stroke-width:0.5682574916759157;stroke-dasharray:5.0,5.0;" x1="613.7181" x2="613.7181" y1="64.1332" y2="220.2886" /><line style="stroke:#181818;stroke-width:0.5682574916759157;stroke-dasharray:5.0,5.0;" x1="795.5605" x2="795.5605" y1="64.1332" y2="220.2886" /><line style="stroke:#181818;stroke-width:0.5682574916759157;stroke-dasharray:5.0,5.0;" x1="956.9456" x2="956.9456" y1="64.1332" y2="220.2886" /><rect fill="#E2E2F0" height="34.4329" rx="2.8413" ry="2.8413" style="stroke:#181818;stroke-width:0.5682574916759157;" width="109.1054" x="5.6826" y="28.5638" /><text fill="#000000" font-family="sans-serif" font-size="15.9112" lengthAdjust="spacing" textLength="93.1942" x="13.6382" y="51.2886">Client Lourd</text><rect fill="#E2E2F0" height="34.4329" rx="2.8413" ry="2.8413" style="stroke:#181818;stroke-width:0.5682574916759157;" width="109.1054" x="5.6826" y="219.1521" /><text fill="#000000" font-family="sans-serif" font-size="15.9112" lengthAdjust="spacing" textLength="93.1942" x="13.6382" y="241.8768">Client Lourd</text><rect fill="#E2E2F0" height="34.4329" rx="2.8413" ry="2.8413" style="stroke:#181818;stroke-width:0.5682574916759157;" width="119.3341" x="248.3285" y="28.5638" /><text fill="#000000" font-family="sans-serif" font-size="15.9112" lengthAdjust="spacing" textLength="103.4229" x="256.2841" y="51.2886">Proxy LPS API</text><rect fill="#E2E2F0" height="34.4329" rx="2.8413" ry="2.8413" style="stroke:#181818;stroke-width:0.5682574916759157;" width="119.3341" x="248.3285" y="219.1521" /><text fill="#000000" font-family="sans-serif" font-size="15.9112" lengthAdjust="spacing" textLength="103.4229" x="256.2841" y="241.8768">Proxy LPS API</text><rect fill="#E2E2F0" height="34.4329" rx="2.8413" ry="2.8413" style="stroke:#181818;stroke-width:0.5682574916759157;" width="154.566" x="536.4351" y="28.5638" /><text fill="#000000" font-family="sans-serif" font-size="15.9112" lengthAdjust="spacing" textLength="138.6548" x="544.3907" y="51.2886">ProSanteConnect</text><rect fill="#E2E2F0" height="34.4329" rx="2.8413" ry="2.8413" style="stroke:#181818;stroke-width:0.5682574916759157;" width="154.566" x="536.4351" y="219.1521" /><text fill="#000000" font-family="sans-serif" font-size="15.9112" lengthAdjust="spacing" textLength="138.6548" x="544.3907" y="241.8768">ProSanteConnect</text><rect fill="#E2E2F0" height="34.4329" rx="2.8413" ry="2.8413" style="stroke:#181818;stroke-width:0.5682574916759157;" width="186.3885" x="702.3663" y="28.5638" /><text fill="#000000" font-family="sans-serif" font-size="15.9112" lengthAdjust="spacing" textLength="170.4772" x="710.3219" y="51.2886">Serveur d'autorisation</text><rect fill="#E2E2F0" height="34.4329" rx="2.8413" ry="2.8413" style="stroke:#181818;stroke-width:0.5682574916759157;" width="186.3885" x="702.3663" y="219.1521" /><text fill="#000000" font-family="sans-serif" font-size="15.9112" lengthAdjust="spacing" textLength="170.4772" x="710.3219" y="241.8768">Serveur d'autorisation</text><rect fill="#E2E2F0" height="34.4329" rx="2.8413" ry="2.8413" style="stroke:#181818;stroke-width:0.5682574916759157;" width="113.6515" x="900.1199" y="28.5638" /><text fill="#000000" font-family="sans-serif" font-size="15.9112" lengthAdjust="spacing" textLength="97.7403" x="908.0755" y="51.2886">Service cible</text><rect fill="#E2E2F0" height="34.4329" rx="2.8413" ry="2.8413" style="stroke:#181818;stroke-width:0.5682574916759157;" width="113.6515" x="900.1199" y="219.1521" /><text fill="#000000" font-family="sans-serif" font-size="15.9112" lengthAdjust="spacing" textLength="97.7403" x="908.0755" y="241.8768">Service cible</text><rect fill="#FFFFFF" height="67.2053" style="stroke:#181818;stroke-width:1.1365149833518313;" width="11.3651" x="302.313" y="99.5161" /><rect fill="#FFFFFF" height="67.2053" style="stroke:#181818;stroke-width:1.1365149833518313;" width="11.3651" x="608.0355" y="132.626" /><polygon fill="#181818" points="288.6748,94.97,300.04,99.5161,288.6748,104.0622,293.2209,99.5161" style="stroke:#181818;stroke-width:1.1365149833518313;" /><line style="stroke:#181818;stroke-width:1.1365149833518313;" x1="60.2353" x2="295.4939" y1="99.5161" y2="99.5161" /><text fill="#000000" font-family="sans-serif" font-size="14.7747" lengthAdjust="spacing" textLength="220.4839" x="68.1909" y="93.7586">1. Demande de userinfo (PSC)</text><polygon fill="#181818" points="594.3973,128.0799,605.7625,132.626,594.3973,137.172,598.9434,132.626" style="stroke:#181818;stroke-width:1.1365149833518313;" /><line style="stroke:#181818;stroke-width:1.1365149833518313;" x1="313.6781" x2="601.2164" y1="132.626" y2="132.626" /><text fill="#000000" font-family="sans-serif" font-size="14.7747" lengthAdjust="spacing" textLength="272.7636" x="321.6337" y="126.8685">2. subject_token + demande userinfo</text><polygon fill="#181818" points="320.4972,195.2852,309.1321,199.8313,320.4972,204.3774,315.9512,199.8313" style="stroke:#181818;stroke-width:1.1365149833518313;" /><line style="stroke:#181818;stroke-width:1.1365149833518313;" x1="313.6781" x2="612.5816" y1="199.8313" y2="199.8313" /><text fill="#000000" font-family="sans-serif" font-size="14.7747" lengthAdjust="spacing" textLength="121.6071" x="327.3163" y="194.0738">3. userinfo (PSC)</text></g></svg></div>

<h4 id="cas-où-le-service-cible-souhaite-accéder-au-userinfo-">Cas où le service cible souhaite accéder au userinfo :</h4>
<ul>
  <li>Le jeton user info ne peut pas être récupéré directement auprès de PSC. 
Dans ce cas c’est le serveur d’autorisation qui le récupère et qui le met en cache.</li>
  <li>Le serveur d’autorisation récupère le userinfo durant la durée de validité du <code class="language-plaintext highlighter-rouge">subject_token</code>.</li>
</ul>

<div style="text-align: center;"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="487.7226px" preserveAspectRatio="none" style="width:1024px;height:487px;background:#FFFFFF;" version="1.1" viewBox="0 0 1024 487" width="1024.7247px" zoomAndPan="magnify"><defs /><g><rect fill="#98FB98" height="479.7396" style="stroke:#181818;stroke-width:0.3623496107572541;" width="383.0035" x="0.7247" y="4.3482" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" font-weight="bold" lengthAdjust="spacing" textLength="155.8103" x="114.3213" y="13.0931">Systeme appelant / initiateur</text><rect fill="#AFEEEE" height="479.7396" style="stroke:#181818;stroke-width:0.3623496107572541;" width="305.8231" x="710.2052" y="4.3482" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" font-weight="bold" lengthAdjust="spacing" textLength="74.644" x="825.7948" y="13.0931">Systeme cible</text><rect fill="#FFFFFF" height="133.9222" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="339.1592" y="63.4565" /><rect fill="#FFFFFF" height="47.9264" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="339.1592" y="291.2498" /><rect fill="#FFFFFF" height="51.6461" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="601.5004" y="102.058" /><rect fill="#FFFFFF" height="21.1125" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="601.5004" y="218.4912" /><rect fill="#FFFFFF" height="21.1125" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="601.5004" y="398.8903" /><rect fill="#FFFFFF" height="115.6122" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="768.9059" y="197.3786" /><rect fill="#FFFFFF" height="21.1125" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="768.9059" y="420.0028" /><rect fill="none" height="85.1748" style="stroke:#000000;stroke-width:1.0870488322717622;" width="463.4452" x="297.489" y="74.327" /><rect fill="none" height="149.1408" style="stroke:#000000;stroke-width:1.0870488322717622;" width="679.4055" x="297.489" y="169.6476" /><rect fill="none" height="96.8662" style="stroke:#000000;stroke-width:1.0870488322717622;" width="471.7792" x="548.5973" y="350.0467" /><line style="stroke:#181818;stroke-width:0.3623496107572541;stroke-dasharray:5.0,5.0;" x1="38.4091" x2="38.4091" y1="40.8946" y2="459.2328" /><line style="stroke:#181818;stroke-width:0.3623496107572541;stroke-dasharray:5.0,5.0;" x1="342.4204" x2="342.4204" y1="40.8946" y2="459.2328" /><line style="stroke:#181818;stroke-width:0.3623496107572541;stroke-dasharray:5.0,5.0;" x1="605.1238" x2="605.1238" y1="40.8946" y2="459.2328" /><line style="stroke:#181818;stroke-width:0.3623496107572541;stroke-dasharray:5.0,5.0;" x1="772.5294" x2="772.5294" y1="40.8946" y2="459.2328" /><line style="stroke:#181818;stroke-width:0.3623496107572541;stroke-dasharray:5.0,5.0;" x1="976.8946" x2="976.8946" y1="40.8946" y2="459.2328" /><rect fill="#E2E2F0" height="21.9561" rx="1.8117" ry="1.8117" style="stroke:#181818;stroke-width:0.3623496107572541;" width="69.5711" x="3.6235" y="18.2137" /><text fill="#000000" font-family="sans-serif" font-size="10.1458" lengthAdjust="spacing" textLength="59.4253" x="8.6964" y="32.7042">Client Lourd</text><rect fill="#E2E2F0" height="21.9561" rx="1.8117" ry="1.8117" style="stroke:#181818;stroke-width:0.3623496107572541;" width="69.5711" x="3.6235" y="458.5081" /><text fill="#000000" font-family="sans-serif" font-size="10.1458" lengthAdjust="spacing" textLength="59.4253" x="8.6964" y="472.9986">Client Lourd</text><rect fill="#E2E2F0" height="21.9561" rx="1.8117" ry="1.8117" style="stroke:#181818;stroke-width:0.3623496107572541;" width="76.0934" x="304.736" y="18.2137" /><text fill="#000000" font-family="sans-serif" font-size="10.1458" lengthAdjust="spacing" textLength="65.9476" x="309.8089" y="32.7042">Proxy LPS API</text><rect fill="#E2E2F0" height="21.9561" rx="1.8117" ry="1.8117" style="stroke:#181818;stroke-width:0.3623496107572541;" width="76.0934" x="304.736" y="458.5081" /><text fill="#000000" font-family="sans-serif" font-size="10.1458" lengthAdjust="spacing" textLength="65.9476" x="309.8089" y="472.9986">Proxy LPS API</text><rect fill="#E2E2F0" height="21.9561" rx="1.8117" ry="1.8117" style="stroke:#181818;stroke-width:0.3623496107572541;" width="98.5591" x="555.8443" y="18.2137" /><text fill="#000000" font-family="sans-serif" font-size="10.1458" lengthAdjust="spacing" textLength="88.4133" x="560.9172" y="32.7042">ProSanteConnect</text><rect fill="#E2E2F0" height="21.9561" rx="1.8117" ry="1.8117" style="stroke:#181818;stroke-width:0.3623496107572541;" width="98.5591" x="555.8443" y="458.5081" /><text fill="#000000" font-family="sans-serif" font-size="10.1458" lengthAdjust="spacing" textLength="88.4133" x="560.9172" y="472.9986">ProSanteConnect</text><rect fill="#E2E2F0" height="21.9561" rx="1.8117" ry="1.8117" style="stroke:#181818;stroke-width:0.3623496107572541;" width="118.8507" x="713.104" y="18.2137" /><text fill="#000000" font-family="sans-serif" font-size="10.1458" lengthAdjust="spacing" textLength="108.7049" x="718.1769" y="32.7042">Serveur d'autorisation</text><rect fill="#E2E2F0" height="21.9561" rx="1.8117" ry="1.8117" style="stroke:#181818;stroke-width:0.3623496107572541;" width="118.8507" x="713.104" y="458.5081" /><text fill="#000000" font-family="sans-serif" font-size="10.1458" lengthAdjust="spacing" textLength="108.7049" x="718.1769" y="472.9986">Serveur d'autorisation</text><rect fill="#E2E2F0" height="21.9561" rx="1.8117" ry="1.8117" style="stroke:#181818;stroke-width:0.3623496107572541;" width="72.4699" x="940.6596" y="18.2137" /><text fill="#000000" font-family="sans-serif" font-size="10.1458" lengthAdjust="spacing" textLength="62.3241" x="945.7325" y="32.7042">Service cible</text><rect fill="#E2E2F0" height="21.9561" rx="1.8117" ry="1.8117" style="stroke:#181818;stroke-width:0.3623496107572541;" width="72.4699" x="940.6596" y="458.5081" /><text fill="#000000" font-family="sans-serif" font-size="10.1458" lengthAdjust="spacing" textLength="62.3241" x="945.7325" y="472.9986">Service cible</text><rect fill="#FFFFFF" height="133.9222" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="339.1592" y="63.4565" /><rect fill="#FFFFFF" height="47.9264" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="339.1592" y="291.2498" /><rect fill="#FFFFFF" height="51.6461" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="601.5004" y="102.058" /><rect fill="#FFFFFF" height="21.1125" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="601.5004" y="218.4912" /><rect fill="#FFFFFF" height="21.1125" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="601.5004" y="398.8903" /><rect fill="#FFFFFF" height="115.6122" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="768.9059" y="197.3786" /><rect fill="#FFFFFF" height="21.1125" style="stroke:#181818;stroke-width:0.7246992215145082;" width="7.247" x="768.9059" y="420.0028" /><polygon fill="#181818" points="330.4628,60.5577,337.7098,63.4565,330.4628,66.3553,333.3616,63.4565" style="stroke:#181818;stroke-width:0.7246992215145082;" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="38.4091" x2="334.811" y1="63.4565" y2="63.4565" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="286.9809" x="43.482" y="59.7852">1. acces initial avec cookie de session (user deja PSConnecte)</text><path d="M297.489,74.327 L517.7976,74.327 L517.7976,79.4961 L510.5506,86.7431 L297.489,86.7431 L297.489,74.327 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0870488322717622;" /><rect fill="none" height="85.1748" style="stroke:#000000;stroke-width:1.0870488322717622;" width="463.4452" x="297.489" y="74.327" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" font-weight="bold" lengthAdjust="spacing" textLength="187.6971" x="308.3595" y="83.7965">Authentification Pro Sante Connect</text><polygon fill="#181818" points="592.804,99.1592,600.051,102.058,592.804,104.9568,595.7028,102.058" style="stroke:#181818;stroke-width:0.7246992215145082;" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="346.4062" x2="597.1522" y1="102.058" y2="102.058" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="234.8025" x="351.4791" y="98.3868">2. Demande de subject_token + cookie de session</text><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="608.7473" x2="639.1847" y1="123.1706" y2="123.1706" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="639.1847" x2="639.1847" y1="123.1706" y2="132.5916" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="609.472" x2="639.1847" y1="132.5916" y2="132.5916" /><polygon fill="#181818" points="616.719,129.6929,609.472,132.5916,616.719,135.4904,613.8202,132.5916" style="stroke:#181818;stroke-width:0.7246992215145082;" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="138.4176" x="613.8202" y="119.4993">Controle du cookie de session</text><polygon fill="#181818" points="354.3779,150.8054,347.1309,153.7042,354.3779,156.603,351.4791,153.7042" style="stroke:#181818;stroke-width:0.7246992215145082;" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="350.0297" x2="604.3992" y1="153.7042" y2="153.7042" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="237.7013" x="358.7261" y="150.0329">3. ID Token + subject_token + Refresh Token (PSC)</text><path d="M297.489,169.6476 L409.0927,169.6476 L409.0927,174.8167 L401.8457,182.0637 L297.489,182.0637 L297.489,169.6476 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0870488322717622;" /><rect fill="none" height="149.1408" style="stroke:#000000;stroke-width:1.0870488322717622;" width="679.4055" x="297.489" y="169.6476" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" font-weight="bold" lengthAdjust="spacing" textLength="78.9922" x="308.3595" y="179.1171">OAUTH2.0 flow</text><polygon fill="#181818" points="760.2095,194.4798,767.4565,197.3786,760.2095,200.2774,763.1083,197.3786" style="stroke:#181818;stroke-width:0.7246992215145082;" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="342.7827" x2="764.5577" y1="197.3786" y2="197.3786" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="340.6086" x="347.8556" y="193.7074">4. subject_token(parametre) + Client ID_AS(header) + scope(parametre)</text><polygon fill="#181818" points="616.719,215.5924,609.472,218.4912,616.719,221.39,613.8202,218.4912" style="stroke:#181818;stroke-width:0.7246992215145082;" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="612.3708" x2="768.1812" y1="218.4912" y2="218.4912" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="146.3892" x="621.0672" y="214.8199">5. subject_token (introspection)</text><polygon fill="#181818" points="760.2095,236.7049,767.4565,239.6037,760.2095,242.5025,763.1083,239.6037" style="stroke:#181818;stroke-width:0.7246992215145082;" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="605.1238" x2="764.5577" y1="239.6037" y2="239.6037" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="28.988" x="610.1967" y="235.9324">OK/KO</text><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="776.1529" x2="806.5902" y1="260.7162" y2="260.7162" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="806.5902" x2="806.5902" y1="260.7162" y2="270.1373" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="776.8776" x2="806.5902" y1="270.1373" y2="270.1373" /><polygon fill="#181818" points="784.1246,267.2385,776.8776,270.1373,784.1246,273.0361,781.2258,270.1373" style="stroke:#181818;stroke-width:0.7246992215145082;" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="186.9724" x="781.2258" y="257.0449">Controle d'acces (Client ID_AS x scopes)</text><polygon fill="#181818" points="354.3779,288.351,347.1309,291.2498,354.3779,294.1486,351.4791,291.2498" style="stroke:#181818;stroke-width:0.7246992215145082;" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="350.0297" x2="768.1812" y1="291.2498" y2="291.2498" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="74.644" x="358.7261" y="287.5786">6. access_token</text><polygon fill="#181818" points="968.1982,336.2774,975.4452,339.1762,968.1982,342.075,971.097,339.1762" style="stroke:#181818;stroke-width:0.7246992215145082;" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="342.7827" x2="972.5464" y1="339.1762" y2="339.1762" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="183.3489" x="347.8556" y="335.505">10. access_token + acces aux donnees</text><path d="M548.5973,350.0467 L624.6907,350.0467 L624.6907,355.2159 L617.4437,362.4628 L548.5973,362.4628 L548.5973,350.0467 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0870488322717622;" /><rect fill="none" height="96.8662" style="stroke:#000000;stroke-width:1.0870488322717622;" width="471.7792" x="548.5973" y="350.0467" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" font-weight="bold" lengthAdjust="spacing" textLength="43.482" x="559.4678" y="359.5163">userinfo</text><polygon fill="#181818" points="780.5011,374.879,773.2541,377.7778,780.5011,380.6766,777.6023,377.7778" style="stroke:#181818;stroke-width:0.7246992215145082;" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="776.1529" x2="976.1699" y1="377.7778" y2="377.7778" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="95.6603" x="784.8493" y="374.1065">7. demande userinfo</text><polygon fill="#181818" points="616.719,395.9915,609.472,398.8903,616.719,401.7891,613.8202,398.8903" style="stroke:#181818;stroke-width:0.7246992215145082;" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="612.3708" x2="771.8047" y1="398.8903" y2="398.8903" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="106.5308" x="621.0672" y="395.219">7. demande le userinfo</text><polygon fill="#181818" points="760.2095,417.104,767.4565,420.0028,760.2095,422.9016,763.1083,420.0028" style="stroke:#181818;stroke-width:0.7246992215145082;" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="605.1238" x2="764.5577" y1="420.0028" y2="420.0028" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="48.5548" x="610.1967" y="416.3316">8. userinfo</text><polygon fill="#181818" points="968.1982,438.2166,975.4452,441.1154,968.1982,444.0142,971.097,441.1154" style="stroke:#181818;stroke-width:0.7246992215145082;" /><line style="stroke:#181818;stroke-width:0.7246992215145082;" x1="772.5294" x2="972.5464" y1="441.1154" y2="441.1154" /><text fill="#000000" font-family="sans-serif" font-size="9.4211" lengthAdjust="spacing" textLength="100.7332" x="777.6023" y="437.4441">9. userinfo (en cache)</text></g></svg></div>



</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div style="background-color:var(--footer-nav-bg-color)">
        <table style="width:100%">
          <tbody>
            <tr>
              <td style="text-align:left">&#xA0;

                <a href="api_prosanteconnectee_client_lourd.html">&lt;prev</a>

              </td>
              <td style="text-align:center">
                <a href="#top">top</a>
              </td>
              <td style="text-align:right">&#xA0;

                <a href="api_prosanteconnectee_donnees_metiers.html">next&gt;</a>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="inner-wrapper">
        <p>
          IG &#169; 2020+ <a style="color:var(--footer-hyperlink-text-color)" href="https://esante.gouv.fr">ANS</a>.  Package ans.fr.securisation-transport#1.2.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Wed, Dec 6, 2023 09:27+0000">2023-12-06</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)"></span>
                      Liens: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table des matières </a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA </a> |
                 <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://interop.esante.gouv.fr/ig/securisation-transport/history.html">Historique des versions </a>
                  | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/ansforge/IG-securisation-transport-api-rest/issues/new">New Issue</a>
                

          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->
  
  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>

  <!-- Ajout ANS -->
  <script src="assets/js/app.js" type="text/javascript"> </script>
  <script src="assets/js/vendor.js" type="text/javascript"> </script>
  <!-- Fin ajout ANS -->

  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
<!-- feedback form - Google forms -->
<!-- v0.1, 2021-01-09 -->


  
    
  



<!-- / feedback form  -->

  <!-- Analytics Below
  ================================================== -->


  <!-- AJOUT ANS -->

<footer class="footer footer-principal" role="contentinfo">
  <div class="footer__region1">
    <div class="container">
      <div class="row">

        <div class="col-md-6 col-lg-4 text-center text-md-left">
          <div class="logos">        
            <div class="logo logo--0">
              <a href="https://solidarites-sante.gouv.fr" title="Ministère des Solidarités et de la Santé (nouvelle fenêtre)" target="_blank" rel="nofollow">
                
                <img src="assets/images/logo-ministere.svg" alt="Ministère des Solidarités et de la Santé" width="133" height="77" loading="lazy" />
                
              </a>
            </div>
        
            <div class="logo logo--1">
              <a href="https://esante.gouv.fr/" title="Agence du numérique en santé (nouvelle fenêtre)" target="_blank" rel="nofollow">
                
                <img src="assets/images/logo-ANS-footer.svg" alt="Agence du numérique en santé" width="106" height="74" loading="lazy" />
              </a>
            </div>
          </div>
        </div>
        
        <div class="col-md-6 col-lg-4 text-center text-md-left">
          <p class="footer__title">Agence du Numérique en Santé</p>
          <p>2-10 Rue d'Oradour-sur-Glane 75015 Paris</p>

          <!-- <div class="m-social">
            <ul class="m-social__list">        
              <li class="m-social__item">
                <a class="m-social__link" href="https://www.linkedin.com/company/agence-du-numerique-en-sante/" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-linkedin" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#linkedin"></use></svg>
                  </div>
                  <span class="sr-only">linkedin</span>
                </a>
              </li>
              <li class="m-social__item">
                <a class="m-social__link" href="https://twitter.com/esante_gouv_fr" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-twitter" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#twitter"></use></svg>
                  </div>
                  <span class="sr-only">twitter</span>
                </a>
              </li>
              <li class="m-social__item">
                <a class="m-social__link" href="https://www.youtube.com/channel/UCd1zuSaU5cE1lRCpwv_HSMA" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-youtube" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#youtube"></use></svg>
                  </div>
                  <span class="sr-only">youtube</span>
                </a>
              </li>
              <li class="m-social__item">
                <a class="m-social__link" href="https://esante.gouv.fr/rss.xml" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-rss" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#rss"></use></svg>
                  </div>
                  <span class="sr-only">rss</span>
                </a>
              </li>
            </ul>
          </div> -->
        </div>
        
        <div class="col-6 col-lg-4">
          <ul class="footer-list">
            <li class="footer-list__item footer-list__item--hasIcon">
              <a href="mailto:ci-sis@esante.gouv.fr" class="mailto-link">
                <svg class="svg-icon svg-angle-right" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#angle-right"></use></svg>Contact</a>
              </li>
              <!-- <li class="footer-list__item">
                <a href="https://interop-pprod.esante.gouv.fr/ci-sis-specifications/wp-content/uploads/CGU_espace_de_tests_v1.1.pdf" class="file-link">Mentions légales</a>
              </li>
               -->
            </ul>
          </div>

        </div>
      </div>
    </div>
    
    <!-- <div class="footer__region2">
      <div class="container">
        <div class="footer-contentinfo">
          <ul class="footer-list footer-list--inline">

          </ul>
        </div>
      </div>
    </div> -->
  </footer>
  </body>
</html>

